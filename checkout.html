<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Checkout - 3140 Active Wear</title>
		<link rel="stylesheet" href="CSS/style.css" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" />

		<!-- Payment SDK Scripts -->
		<script src="https://www.paypal.com/sdk/js?client-id=AYk6lFOBFe_nP98YJ7UvlGj-mS8lp32oXRIysMN9cuSMvFXsbbyavABiiqAfNmD1vFPdbymMSsLvRyud&currency=USD&intent=capture"></script>
		<script async src="https://pay.google.com/gp/p/js/pay.js" onload="onGooglePayLoaded()"></script>
		<script crossorigin src="https://applepay.cdn-apple.com/jsapi/1.latest/apple-pay-sdk.js"></script>
		<script>
			// Affirm configuration
			_affirm_config = {
				public_api_key: "YOUR_AFFIRM_PUBLIC_API_KEY",
				script: "https://cdn1-sandbox.affirm.com/js/v2/affirm.js", // Use production URL for live
			}
			;(function (l, g, m, e, a, f, b) {
				var d,
					c = l[a] || (l[a] = {}),
					h = document.createElement(f),
					n = document.getElementsByTagName(f)[0],
					k = function (a, b, c) {
						return function () {
							a[b]._.push([c, arguments])
						}
					}
				c[e] = k(c, e, "set")
				d = c[e]
				c[g] = k(c, g, "require")
				c[f] = k(c, f, "load")
				for (var b = 0; b < m.length; b++) d._.push([m[b], []])
				h.async = !0
				h.src = b
				n.parentNode.insertBefore(h, n)
			})(window, "affirm", "checkout ui", _affirm_config.public_api_key, "_affirm", _affirm_config.script, "script")
		</script>
	</head>
	<body>
		<section id="header">
			<a href="index.html"><img src="Icons/logo.png" class="logo" alt="Site Logo" width="100%" height="250" /></a>
			<div>
				<ul id="navbar">
					<li><a href="index.html">Home</a></li>
					<li><a href="shop.html">Shop</a></li>
					<li><a href="donate.html">Donate</a></li>
					<li class="dropdown">
						<a>Contact ▼</a>
						<ul class="dropdown-content">
							<li><a href="contact.html">Contact us</a></li>
							<li><a href="about.html">About us</a></li>
						</ul>
					</li>
					<li><a href="login.html" id="login-logout-link">Login/Register</a></li>
					<li>
						<div class="cart-container">
							<a class="active" href="cart.html" id="cart-icon">
								<i class="fa fa-shopping-bag" aria-hidden="true"></i>
								<span id="cart-count">0</span>
							</a>
							<div id="cart-preview" class="cart-preview">
								<a href="cart.html" class="button-link white">My Shopping Cart</a>
								<div id="cart-items"></div>
								<div class="cart-total">
									<strong>Total:</strong>
									$
									<span id="cart-total">0.00</span>
								</div>
								<div style="margin-top: 20px; text-align: center">
									<a href="checkout.html" class="button-link">Proceed to Checkout</a>
									<a href="order.html" class="button-link white">My Order History</a>
								</div>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</section>

		<main id="checkout-page">
			<div class="checkout-container">
				<div class="checkout-form">
					<h3>Please enter your information to place your order!</h3>

					<h3>Contact Information</h3>
					<form id="checkout-form-element" novalidate>
						<div class="form-group">
							<input type="text" id="first-name" placeholder="First Name" required />
							<input type="text" id="last-name" placeholder="Last Name" required />
						</div>
						<div class="form-group">
							<input type="email" id="email" placeholder="Email" required />
						</div>
						<div class="form-group">
							<input type="tel" id="phone" placeholder="Phone" />
						</div>

						<h3>Shipping Address</h3>
						<div class="form-group">
							<input type="text" id="address" placeholder="Street Address" required />
						</div>
						<div class="form-group-3">
							<input type="text" id="city" placeholder="City" required />
							<select id="state" required>
								<option value="">State</option>
								<option value="AL">AL</option>
								<option value="AK">AK</option>
								<option value="AZ">AZ</option>
								<option value="AR">AR</option>
								<option value="CA">CA</option>
								<option value="CO">CO</option>
								<option value="CT">CT</option>
								<option value="DE">DE</option>
								<option value="DC">DC</option>
								<option value="FL">FL</option>
								<option value="GA">GA</option>
								<option value="HI">HI</option>
								<option value="ID">ID</option>
								<option value="IL">IL</option>
								<option value="IN">IN</option>
								<option value="IA">IA</option>
								<option value="KS">KS</option>
								<option value="KY">KY</option>
								<option value="LA">LA</option>
								<option value="ME">ME</option>
								<option value="MD">MD</option>
								<option value="MA">MA</option>
								<option value="MI">MI</option>
								<option value="MN">MN</option>
								<option value="MS">MS</option>
								<option value="MO">MO</option>
								<option value="MT">MT</option>
								<option value="NE">NE</option>
								<option value="NV">NV</option>
								<option value="NH">NH</option>
								<option value="NJ">NJ</option>
								<option value="NM">NM</option>
								<option value="NY">NY</option>
								<option value="NC">NC</option>
								<option value="ND">ND</option>
								<option value="OH">OH</option>
								<option value="OK">OK</option>
								<option value="OR">OR</option>
								<option value="PA">PA</option>
								<option value="RI">RI</option>
								<option value="SC">SC</option>
								<option value="SD">SD</option>
								<option value="TN">TN</option>
								<option value="TX">TX</option>
								<option value="UT">UT</option>
								<option value="VT">VT</option>
								<option value="VA">VA</option>
								<option value="WA">WA</option>
								<option value="WV">WV</option>
								<option value="WI">WI</option>
								<option value="WY">WY</option>
							</select>
							<input type="text" id="zip-code" placeholder="ZIP Code" required />
						</div>
					</form>

					<h3>Billing Address</h3>
					<div class="form-group-checkbox">
						<input type="checkbox" id="sameAsShipping" checked />
						<label for="sameAsShipping">Same as shipping address</label>
					</div>
					<div id="billingAddressFields" style="display: none">
						<div class="form-group">
							<input type="text" id="mail-address" placeholder="Street Address" />
						</div>
						<div class="form-group-3">
							<input type="text" id="mail-city" placeholder="City" />
							<select id="mail-state">
								<option value="">State</option>
								<option value="AL">AL</option>
								<option value="AK">AK</option>
								<option value="AZ">AZ</option>
								<option value="AR">AR</option>
								<option value="CA">CA</option>
								<option value="CO">CO</option>
								<option value="CT">CT</option>
								<option value="DE">DE</option>
								<option value="DC">DC</option>
								<option value="FL">FL</option>
								<option value="GA">GA</option>
								<option value="HI">HI</option>
								<option value="ID">ID</option>
								<option value="IL">IL</option>
								<option value="IN">IN</option>
								<option value="IA">IA</option>
								<option value="KS">KS</option>
								<option value="KY">KY</option>
								<option value="LA">LA</option>
								<option value="ME">ME</option>
								<option value="MD">MD</option>
								<option value="MA">MA</option>
								<option value="MI">MI</option>
								<option value="MN">MN</option>
								<option value="MS">MS</option>
								<option value="MO">MO</option>
								<option value="MT">MT</option>
								<option value="NE">NE</option>
								<option value="NV">NV</option>
								<option value="NH">NH</option>
								<option value="NJ">NJ</option>
								<option value="NM">NM</option>
								<option value="NY">NY</option>
								<option value="NC">NC</option>
								<option value="ND">ND</option>
								<option value="OH">OH</option>
								<option value="OK">OK</option>
								<option value="OR">OR</option>
								<option value="PA">PA</option>
								<option value="RI">RI</option>
								<option value="SC">SC</option>
								<option value="SD">SD</option>
								<option value="TN">TN</option>
								<option value="TX">TX</option>
								<option value="UT">UT</option>
								<option value="VT">VT</option>
								<option value="VA">VA</option>
								<option value="WA">WA</option>
								<option value="WV">WV</option>
								<option value="WI">WI</option>
								<option value="WY">WY</option>
							</select>
							<input type="text" id="mail-zip-code" placeholder="ZIP Code" />
						</div>
					</div>
					<h3>Payment</h3>
					<div class="payment-container">
						<ul class="payment-tabs">
							<li class="tab-link active" data-tab="credit-card">
								<i class="fa fa-credit-card"></i>
								<span>Credit Card</span>
							</li>
							<li class="tab-link" data-tab="paypal">
								<i class="fab fa-paypal"></i>
								<span>PayPal</span>
							</li>
							<li class="tab-link" data-tab="google-pay">
								<i class="fab fa-google-pay"></i>
								<span>Google Pay</span>
							</li>
							<li class="tab-link" data-tab="apple-pay">
								<i class="fab fa-apple-pay"></i>
								<span>Apple Pay</span>
							</li>
							<li class="tab-link" data-tab="affirm">
								<i class="fas fa-calendar-alt"></i>
								<span>Affirm</span>
							</li>
						</ul>

						<!-- Credit Card Tab -->
						<div id="credit-card" class="tab-content active">
							<div class="credit-card-icons">
								<i class="fab fa-cc-visa" title="Visa"></i>
								<i class="fab fa-cc-mastercard" title="Mastercard"></i>
								<i class="fab fa-cc-amex" title="American Express"></i>
								<i class="fab fa-cc-discover" title="Discover"></i>
							</div>
							<form id="checkout-card-element">
								<div class="form-group">
									<input type="text" id="card-number" placeholder="Card Number" maxlength="19" />
								</div>
								<div class="form-group">
									<input type="text" id="card-name" placeholder="Name on Card" />
								</div>
								<div class="form-group">
									<input type="text" id="card-expiry" placeholder="MM / YY" maxlength="7" />
									<input type="text" id="card-cvc" placeholder="CVC" maxlength="4" />
								</div>
							</form>
							<div class="security-notice">
								<i class="fas fa-lock"></i>
								<span>Your payment information is encrypted and secure</span>
							</div>
						</div>

						<!-- PayPal Tab -->
						<div id="paypal" class="tab-content">
							<div id="paypal-button-container"></div>
							<div class="payment-note">Secure payment with PayPal. You'll be redirected to complete your purchase.</div>
						</div>

						<!-- Google Pay Tab -->
						<div id="google-pay" class="tab-content">
							<div id="google-pay-button-container"></div>
							<div class="payment-note">Pay securely with Google Pay using your saved payment methods.</div>
						</div>

						<!-- Apple Pay Tab -->
						<div id="apple-pay" class="tab-content">
							<div id="apple-pay-button-container"></div>
							<div class="payment-note">Pay securely with Touch ID or Face ID using Apple Pay.</div>
						</div>

						<!-- Affirm Tab -->
						<div id="affirm" class="tab-content">
							<div id="affirm-button-container"></div>
							<div id="affirm-promo-container"></div>
							<div class="payment-note">Pay over time with flexible payment plans. No hidden fees.</div>
						</div>
					</div>
					<button class="place-order-btn" onclick="placeOrder()">Place Order</button>
				</div>
				<div class="order-summary">
					<h3>Order Summary</h3>
					<div id="summary-items">
						<p>Loading your cart...</p>
					</div>
					<div class="summary-row">
						<span>Subtotal</span>
						<span id="summary-subtotal">$0.00</span>
					</div>
					<div class="summary-row">
						<span>Shipping</span>
						<span>FREE</span>
					</div>
					<hr />
					<div class="summary-row total">
						<strong>Total</strong>
						<strong id="summary-grand-total">$0.00</strong>
					</div>
				</div>
			</div>
		</main>
		<footer>
			<p style="margin: 0">&copy; 2025 CISC 3140 ACTIVE WEAR (E-commerceProject) — Built with ❤️ by student developers for education.</p>
		</footer>
		<div id="modal" class="modal" role="dialog" aria-modal="true" tabindex="-1">
			<div class="modal-content">
				<h3 id="modal-title"></h3>
				<p id="modal-message"></p>
				<button id="modal-ok-button" type="button">OK</button>
			</div>
		</div>

		<script>
			// Google Pay callback
			function onGooglePayLoaded() {
				console.log("Google Pay SDK loaded")
			}

			// Credit card input formatting
			document.addEventListener("DOMContentLoaded", function () {
				// Format card number input
				const cardNumberInput = document.getElementById("card-number")
				if (cardNumberInput) {
					cardNumberInput.addEventListener("input", function (e) {
						let value = e.target.value.replace(/\D/g, "")
						value = value.replace(/(\d{4})(?=\d)/g, "$1 ")
						e.target.value = value
					})
				}

				// Format expiry date input
				const cardExpiryInput = document.getElementById("card-expiry")
				if (cardExpiryInput) {
					cardExpiryInput.addEventListener("input", function (e) {
						let value = e.target.value.replace(/\D/g, "")
						if (value.length >= 2) {
							value = value.substring(0, 2) + " / " + value.substring(2, 4)
						}
						e.target.value = value
					})
				}

				// Format CVC input (numbers only)
				const cardCvcInput = document.getElementById("card-cvc")
				if (cardCvcInput) {
					cardCvcInput.addEventListener("input", function (e) {
						e.target.value = e.target.value.replace(/\D/g, "")
					})
				}
			})
		</script>

		<script src="JS/api-config.js" defer></script>
		<script src="JS/app.js" defer></script>
		<script src="JS/cart-preview.js" defer></script>
		<script src="JS/checkout.js" defer></script>
	</body>
</html>
